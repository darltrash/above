{
    "id": "io.github.darltrash.meadows",
    "runtime": "org.freedesktop.Platform",
    "runtime-version": "22.08",
    "sdk": "org.freedesktop.Sdk",

    "finish-args": [
        "--device=all",
        "--socket=x11",
        "--socket=pulseaudio",
        "--share=ipc"
    ],

    "modules": [
        {
            "name": "PhysicsFS",
            "buildsystem": "cmake-ninja",
            "cleanup": [
                "/lib/*.a",
                "/include",
                "/lib/pkgconfig",
                "/bin"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://icculus.org/physfs/downloads/physfs-3.0.2.tar.bz2",
                    "sha256": "304df76206d633df5360e738b138c94e82ccf086e50ba84f456d3f8432f9f863"
                }
            ]
        },

        {
            "name": "libmodplug",
            "cleanup": [
                "/include",
                "/lib/pkgconfig",
                "/lib/*.la"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://sourceforge.net/projects/modplug-xmms/files/libmodplug/0.8.9.0/libmodplug-0.8.9.0.tar.gz",
                    "sha256": "457ca5a6c179656d66c01505c0d95fafaead4329b9dbaa0f997d00a3508ad9de"
                }
            ]
        },

        {
            "name": "luajit",
            "no-autogen": true,
            "make-install-args": [
                "PREFIX=/app"
            ],
            "cleanup": [
                "/share/man",
                "/lib/*.a",
                "/include",
                "/lib/pkgconfig",
                "/bin"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://luajit.org/download/LuaJIT-2.1.0-beta3.tar.gz",
                    "sha256": "1ad2e34b111c802f9d0cdf019e986909123237a28c746b21295b63c9e785d9c3"
                }
            ]
        },

        {
            "name": "love",
            "cleanup": [
                "/share/man",
                "/share/applications",
                "/share/mime/packages",
                "/lib/*.la"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/love2d/love/releases/download/11.3/love-11.3-linux-src.tar.gz",
                    "sha256": "649f0db7750ca121e4de7b60208703661052356df35f4cfad490b1ba14dd1455"
                }
            ]
        },

        {
            "name": "meadows",
            "buildsystem": "simple",

            "sources": [
                {
                    "type": "file",
                    "path": "above.love"
                },

                {
                    "type": "file",
                    "path": "game.desktop"
                },

                {
                    "type": "shell",
                    "commands": [
                        "love /var/bin/above.love"
                    ],
                    "dest": "above"
                }
            ],

            "build-commands": [
                "install -D above.love /var/bin/above.love"
            ]
        }
    ],

    "command": "above"
}